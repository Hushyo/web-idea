<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remaining Cost</title>
</head>
<body>
<div>3000</div>
<div>remain: <span id="remain">3000</span></div>
<br>
<div>
    事件: <input type="text" id="reason"> <br>
    花费: <input type="text" id="cost">
    <input type="button" value="提交" onclick="updateCost()">
</div>

<script>
    // 初始化剩余金额
    function initRemaining() {
        var remaining = localStorage.getItem('remaining');
        if (remaining) {
            document.getElementById('remain').innerHTML = remaining;
        } else {
            document.getElementById('remain').innerHTML = 3000;
            localStorage.setItem('remaining', 3000);
        }
    }

    // 更新剩余金额
    function updateCost() {
        var value = document.getElementById("cost").value;
        var remainElement = document.getElementById("remain");
        var currentRemaining = parseFloat(remainElement.innerHTML);
        var newRemaining = currentRemaining - parseFloat(value);

        if (newRemaining >= 0) {
            remainElement.innerHTML = newRemaining;
            localStorage.setItem('remaining', newRemaining);
        } else {
            alert('输入金额超出剩余金额');
        }
    }

    // 页面加载时初始化剩余金额
    window.onload = initRemaining;
</script>
</body>
</html>